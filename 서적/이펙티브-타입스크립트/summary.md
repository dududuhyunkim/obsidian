# 이펙티브 타입스크립트

## 옮긴이의 글
> 과거에는 브라우저에서 가벼운 처리를 위해 도입한 단일 스레드와 비동기 모델이 단점으로 지적되어 왔지만, 현대의 멀티코어 병렬 프로그래밍 환경에는 적합한 메커니즘으로 인식되는 역설적인 상황이 벌어지고 있습니다.

=> 정말 그러한가?

1. 단일 스레드와 비동기 모델의 단점은 무엇인가?
  - 단일 스레드는 한번에 하나의 작업만을 처리할 수 있기 때문에, CPU 집중적인 작업이나 긴 실행 시간을 필요로하는 작업들이 다른 작업들을 차단하여 성능 병목을 일으킬 수 있다.
  - 단일 스레드로 인해 멀티 코어 CPU를 최대한 활용하지 못할 수 있다.
  - 예
    - Python
      - 주로 단일 스레드를 사용하며, `asyncio` 모듈을 통해 비동기 프로그래밍을 지원한다. ES6 와 마찬가지로 `async`, `await` 키워드를 사용하여 비동기 처리를 할 수 있다.
    - Ruby
      - 단일 스레드 기반으로 동작하며, `EventMachine`, `async` 라이브러리를 활용하여 비동기적인 작업을 처리할 수 있다. 
    - C/C++
      - 기본적으로 멀티 스레드를 지원하지만, 비동기 프로그래밍을 위한 고수준의 추상화를 제공하지는 않는다.
    - Java
      - 스레드를 직접 다루거나 멀티 스레드를 지원하는 고수준의 도구를 사용하여 병렬 처리를 할 수 있다. 비동기 프로그래밍을 위한 다른 라이브러리를 이용할 수 있다.
    - Php
      - 일반적으로 단일 스레드로 동작하며, 이벤트 루프나 멀티스레드를 기본적으로 지원하지 않는다. 비동기 프로그래밍을 위한 라이브러리를 이용할 수 있다.
  - 비동기 모델은 callback hell 이 발생할 수 있으며 코드의 복잡성을 야기할 수 있다.

2. 현대의 멀티코어 병렬 프로그래밍 환경에서는 어떤 점 때문에 적합한 메커니즘으로 인식되는가?
  - 비동기 프로그래밍은 I/O 바운드 작업(네트워크 요청, 파일 시스템 액세스 등)에서 매우 효과적이다. 멀티 코어 환경에서도 비동기 프로그래밍은 CPU의 대기시간을 최소화하고 CPU 자원을 효율적으로 활용할 수 있다.
  - 싱글 스레드는 멀티 코어 환경에서 장점을 발휘할 수 없으나, 비동기 프로그래밍으로 인해, OS 커널과 libuv 스레드와 같은 외부 환경에서 병렬로 처리될 수 있으므로 멀티 코어 환경의 장점을 누릴 수 있다.


[concept]
- 실행되고 있는 프로그램 자체를 프로세스라 한다.
- 프로세스 내에서 할당 받은 실행단위를 스레드라 한다.
  - 스레드는 프로세스 내의 메모리 공간을 공유한다.
  - 각각의 프로세스는 별도의 메모리 공간을 갖는다.

- 자바스크립트는 비동기적으로 동작하는 코드를 작성하기에 용이하다. 

- 멀티코어 CPU 는 여러 CPU를 사용하므로 실제로 여러 작업을 동시에 처리할 수 있다.
- 단일 스레드에서는 한번에 하나의 작업만 처리할 수 있는 방식으로 여러 작업을 처리하기 어렵다.

- nodejs는 Chrome V8 Javascript 엔진으로 빌드된 javascript 런타임 환경이다.
  - 단일 스레드, 비동기 이벤트 기반, 논 블로킹 I/O
  - 콜스택, 백그라운드, 이벤트 큐, 이벤트 루프
    - 호출 되는 함수가 콜스택에 쌓인다.
    - 비동기 작업이 백그라운드내에서 실행되고, 완료되면 이벤트 큐로 전달된다.
      - 콜백 함수는 블로킹을 방지하며, nodejs 내에서 논블로킹으로 동작하게 한다.
      - 백그라운드는 libuv 스레드 풀 혹은 OS 커널을 의미한다.
    - 이벤트 루프는 콜스택이 비어있을 때, 이벤트 큐에서 콜백 함수를 꺼내서 콜 스택으로 옮겨 실행한다.

- Nodejs 환경에서는 멀티코어 CPU를 최대한 활용하기 위해 여러 방식을 활용할 수 있다.
  - 클러스터링
    - 여러개의 Nodejs 프로세스를 만들어 각각 다른 CPU 코어에 할당하여 병렬로 여러 요청을 처리할 수 있게 하며, 각각의 프로세스가 독립적으로 동작하며, 로드 밸런싱을 통해 요청을 분산시킴으로써 전체적인 성능을 향상시킬 수 있다.
    - 인스턴스 수를 늘려 Scale out 하는 것과는 별개로 단일 인스턴스의 내부 최적화 기법이다.
  - 워커 스레드
    - nodejs 내에서 멀티스레딩을 지원하는 방법으로, 단일 스레드 내에서 병렬 처리를 할 수 있게 한다. 
    - nodejs 는 비동기 기반의 모델을 가지고 있고, 주로 이를 활용하여 비동기 작업을 처리하고 성능을 극대화한다.
  - 서버리스 아키텍처
    - 서버의 인프라를 추상화하고 관리를 단순화하는 방식, 애플리케이션을 위한 인프라를 관리하는 것을 개발자가 아닌 클라우드 제공업체에게 위임하여 개발자가 코드에 집중할 수 있도록 돕는다.
    - 서버리스 아키텍쳐는 이벤트 기반으로 동작한다. 이벤트가 발생하면 트리거가 작동되어 함수 또는 서비스가 실행된다.
    - aws lambda 는 컨테이너 기반으로 동작한다. 이벤트 발생할 때마다 컨테이너 내에서 실행된다.
    - nodejs와 특성이 유사하다.
      - 단일 스레드와 비동기성
      - 이벤트 기반 아키텍쳐
      - scaling



=> 정말 그렇다.

1. javascript의 runtime 인 nodejs 는 싱글 스레드, 비동기 모델로 동작한다.
2. 싱글 스레드는 한번에 하나의 작업 밖에 실행할 수 없는 제한이 있다.
3. 하지만 nodejs는 비동기 모델을 통해, I/O 바운드 작업(네트워크 요청, 파일 시스템 액세스 등)들이 외부 환경(OS 커널, libuv 스레드 풀)에서 작동된다.
4. 그렇기 때문에, 멀티 코어 환경에서 비동기 작업들을 병렬적으로 처리할 수 있어 효율적이다.
5. 따라서, nodejs는 단일 스레드와 비동기 모델이 단점으로 지적되어 왔지만, 현대의 멀티코어 병렬 프로그래밍 환경에는 적합한 메커니즘으로 인식될 수 있다.

[furthermore]
- 논리적으로는 이해가 되었으나, 멀티 코어 환경에서 실제로 I/O 바운드 작업들이 여러 CPU 들에 의해 사용되는지 확인하고 싶다.
  - 단일 코어와 멀티 코어 의 성능 비교를 해보고 싶다.
  - 웹서버 practice에서 해당 사항이 구체적으로 어떤 도움이 될지 궁금하다.
- 동시성 문제에 대해 좀 더 딥다이브 해봐야한다.

## 1장 타입스크립트 알아보기
### [아이템 1] 타입스크립트와 자바스크립트의 관계 이해하기
- 타입스크립트는 자바스크립트의 superset 이다.
- 타입스크립트는 자바스크립트의 런타임 동작을 모델링하는 타입 시스템을 가진다. 이로 인해 런타임 오류를 발생시키는 코드를 다소 예방할 수 있다.
- 타입스크립트 타입 시스템은 전반적으로 자바스크립트 동작을 모델링한다.
  - 자바스크립트에서 동작하지만, 타입스크립트에서는 동작하지 않는 경우가 있다.

### [아이템 2] 타입스크립트 설정 이해하기
